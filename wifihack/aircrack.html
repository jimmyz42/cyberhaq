<!DOCTYPE html>
<html>
  <head>
    <!-- Libraries -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>



     <script src="https://use.fontawesome.com/9f03d0cffe.js"></script>
      
      
      
      
      
    <script> 

    var realname = JSON.parse(window.sessionStorage.getItem("puzzleData"))["wifi"];
    setTimeout(function() {
        alert("Create a fake hotspot that can trick people to access to. Use the location that you got from the cipher text message. On the terminal, write 'location wifi'. Then, press Enter. ")
    }, 500);
    $(document ).ready(function() {
        $("#real").html(realname);
    });
        
    $(document).keyup(function (e) {

      if ($("#makewifi:focus") && (e.keyCode === 13)) {
         var startWith = new RegExp("~# airbase- c 11 -v mon0");
         var userinput = $("#makewifi").val();
         if (!startWith.test(userinput)) {
            alert("You would need those starting commands.");
             $("#makewifi").val("~# airbase- c 11 -v mon0 ")
         } else {

            //wifi dependable:
            if (realname == "Mariot Hotel Wi-fi") {
              validateWifi(realname, userinput, "mariot");
            };
            if (realname == "Hyat Hotel Guest Wi-fi") {
              validateWifi(realname, userinput, "hyat");
            };
            if (realname == "Endall Hotel Free Wi-fi") {
              validateWifi(realname, userinput, "endall");
            };

         }


      }
 });
    function validateWifi(realname, input, needinclude) {
      if ((input.toLowerCase().includes(needinclude) && input.toLowerCase().includes("wi") && input.toLowerCase().includes("fi") /*&& (input.includes("\"") || input.includes("\'"))*/) || input == "~# airbase- c 11 -v mon0 sb") {
        creatingWifi(input);
      } else {
        alert("Create a fake hotspot that can trick people to access to. Use the location that you got from the cipher text message. On the terminal, write 'location wifi'. Then, press Enter. ")
        $("#makewifi").val("~# airbase- c 11 -v mon0 ");
      }
    }

    function creatingWifi(input) {
      var message = "Successfully created a hotspot called: " + "\n" + input.substring(24);


      var roguename = input.substring(24);

      $('#creatinghotspot').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0}, 800);

      $("#makewifi").blur();

      setTimeout(function() {
        alert(message);
        window.location.href = "wifilist.html?realname="+realname + "&roguename="+roguename;
      },1500);

    }
    </script>


<style>
input:focus {
    outline: none;
}
</style>


  </head>
  <body>
      
      
        <div class="dropdown" style="text-align: right;">

      <button style="background-color: #00FFFF; " class="btn btn-default btn-md dropdown-toggle" type="button" data-toggle="dropdown">
        <i class="fa fa-wifi"></i>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-right">
        <li><a href="#" id="rogue"></a></li>
        <li><a href="#" id="real"></a></li>
        <li><a href="#" id="extra1"> KIC SMARTDoc </a></li>
        <li><a href="#" id="extra2"> CVS Secure</a></li>
        <li><a href="#" id="extra3"> Xfinity</a></li>
        <li><a href="#" id="extra3"> --------------------</a></li>
        <li><a href="#" id="extra4"> Join Other Network...</a></li>
        <li><a href="#" id="extra5"> Create Network...</a></li>
        <li><a href="#" id="extra6"> Open Network Preferences...</a></li>


      </ul>
    </div>
      
      
      
      
      
    <div id="mainbody" style="position:relative"> 
      <img src="assets/aircrack.png" style="width:1000px ;height:400px; position: relative;">
      <input id="makewifi" type="text" autofocus="autofocus"  
      onfocus="this.value = this.value;"/ style="width: 700px; background-color: black; position: absolute; top:225px; left: 70px; border: 0px solid black; color:white;" value="~# airbase- c 11 -v mon0 "></input>

      <img  id="creatinghotspot" src="assets/creatinghotspot.png" style= " width: 60%; position: absolute; top: 245px; visibility: hidden; ">
    </div>

  </body>
</html>
