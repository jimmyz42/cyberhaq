<!DOCTYPE html>
<html>

<head>
    <!-- Libraries -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link href="css/inbox.css" rel="stylesheet" />
    <script src="../inject.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-xs-2 col-sm-3 col-md-2">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                          Mail <span class="caret"></span>
                      </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Mail</a></li>
                        <li><a href="#">Contacts</a></li>
                        <li><a href="#">Tasks</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-10 col-sm-9 col-md-10">
                <!-- Split button -->
                <div class="btn-group">
                    <button type="button" class="btn btn-default" style="height: 34px">
                          <div class="checkbox" style="margin: 0;">
                              <label>
                                  <input type="checkbox">
                              </label>
                          </div>
                      </button>
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                          <span class="caret"></span><span class="sr-only">Toggle Dropdown</span>
                      </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">All</a></li>
                        <li><a href="#">None</a></li>
                        <li><a href="#">Read</a></li>
                        <li><a href="#">Unread</a></li>
                        <li><a href="#">Starred</a></li>
                        <li><a href="#">Unstarred</a></li>
                    </ul>
                </div>
                <button type="button" class="btn btn-default" data-toggle="tooltip" title="Refresh" id="zmail-refresh">
                      &nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;&nbsp;</button>
                <!-- Single button -->
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                          More <span class="caret"></span>
                      </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Mark all as read</a></li>
                        <li class="divider"></li>
                        <li class="text-center"><small class="text-muted">Select messages to see more actions</small></li>
                    </ul>
                </div>
                <div class="pull-right">
                    <span class="text-muted"><b>1</b>-<b>50</b> of <b>160</b></span>
                    <div class="btn-group btn-group-sm">
                        <button type="button" class="btn btn-default">
                              <span class="glyphicon glyphicon-chevron-left"></span>
                          </button>
                        <button type="button" class="btn btn-default">
                              <span class="glyphicon glyphicon-chevron-right"></span>
                          </button>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-xs-2 col-sm-3 col-md-2">
                <a href="#" class="btn btn-danger btn-sm btn-block" role="button"><i class="glyphicon glyphicon-edit"></i> Compose</a>
                <hr>
                <ul class="nav nav-pills nav-stacked">
                    <li class="active"><a href="#"><span class="badge pull-right">32</span> Inbox </a>
                    </li>
                    <li><a href="#">Starred</a></li>
                    <li><a href="#">Important</a></li>
                    <li><a href="#">Sent Mail</a></li>
                    <li><a href="#"><span class="badge pull-right">3</span>Drafts</a></li>
                </ul>
            </div>
            <div class="col-xs-10 col-sm-9 col-md-10">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#home" data-toggle="tab"><span class="glyphicon glyphicon-inbox">
                      </span>Primary</a></li>
                    <li><a href="#profile" data-toggle="tab"><span class="glyphicon glyphicon-user"></span>
                          Social</a></li>
                    <li><a href="#messages" data-toggle="tab"><span class="glyphicon glyphicon-tags"></span>
                          Promotions</a></li>
                    <!--<li><a href="#settings" data-toggle="tab"><span class="glyphicon glyphicon-plus no-margin">
                      </span></a></li>-->
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="home">
                        <div class="list-group">
                            <!-- reset password html -->
                            <a href="#" class="list-group-item reset-email">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star-empty"></span>
                                <span class="name" style="min-width: 120px; display: inline-block;">Fakebook</span> <span class="subject">Password reset</span><span class="badge">01:08 AM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                      </span>
                                </span>
                                <span style="display:none" class="email-content"></span>
                            </a>
                            <!-- /reset password html -->
                            <a href="#" class="list-group-item">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star-empty"></span>
                                <span class="name" style="min-width: 120px; display: inline-block;">Mark Otto</span> <span class="subject">Nice work on the lastest version</span>
                                <span class="badge">12:10 AM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                      </span></span>
                                <span style="display:none" class="email-content">Hey, I just wanted to let you know that you did a great job working on the latest version of our platform. <br /><br /> Best,<br />Mark</span>
                            </a>
                            <a href="#" class="list-group-item">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star-empty"></span>
                                <span class="name" style="min-width: 120px; display: inline-block;">Jason Markus</span> <span class="subject">Project 4 question</span>
                                <span class="badge">12:09 AM</span>
                                <span class="pull-right">
                                    <span class="glyphicon glyphicon-paperclip">
                                    </span>
                                </span>
                                <span style="display:none" class="email-content">Hey <span class='jack-name'></span>, when will your guys finish the project 4 so that my team can move on with the idea.<br /><br />Thanks,<br />Jason</span>
                            </a>
                            <a href="#" class="list-group-item read">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star-empty"></span><span class="name" style="min-width: 120px; display: inline-block;">Fakebook</span> <span class="subject">You've got new friend request</span>
                                <span class="badge">11:30 PM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                                      </span></span>
                                <span style="display:none" class="email-content">Bruce Wayne wants to add you to his friends. <br /><br />Log in to Fakebook to confirm (or decline). <br /><br /> <p>&#9400; Fakebook Inc</p></span>
                            </a>
                            <a href="#" class="list-group-item read">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star"></span><span class="name" style="min-width: 120px; display: inline-block;">LinkedOn</span> <span class="subject">Alireza: No-kia Networks and System Group</span>
                                <span class="badge">10:32 PM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                                      </span></span>
                                <span style="display:none" class="email-content">Alireza: No-kia Networks and System Group offers great deals on their platform. <br />Log in to your LinkedOn to check it out. <br /><br /><p>&#9400; LinkedOn Inc</p></span>
                            </a>
                            <a href="#" class="list-group-item read">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star-empty"></span><span class="name" style="min-width: 120px; display: inline-block;">Switter</span> <span class="subject">Your Switter password has been changed</span>
                                <span class="badge">08:48 PM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                                      </span></span>
                                <span style="display:none" class="email-content">Log in to your Switter account to confirm this change <br /><br /> <p>&#9400; Switter Inc</p></span>
                            </a>
                            <a href="#" class="list-group-item read">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star"></span><span class="name" style="min-width: 120px; display: inline-block;">Tim Reid, S P N</span> <span class="subject">Boost Your Website Traffic</span>
                                <span class="badge">05:21 PM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip"></span></span>
                                <span style="display:none" class="email-content">Boost Your Website Traffic using our newest data analytics software<br /><br />Best,<br /><br />Tim Reid</span>
                            </a>
                            <a href="#" class="list-group-item read">
                                <div class="checkbox">
                                    <label><input type="checkbox"></label>
                                </div>
                                <span class="glyphicon glyphicon-star"></span><span class="name" style="min-width: 120px; display: inline-block;">Anne Hunter</span> <span class="subject">[EECS-jobs-announce] Full-Time Software Engineers</span>
                                <span class="badge">05:08 PM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
                                                      </span></span>
                                <span style="display:none" class="email-content">Covert Lab, Stanford. This position is an opportunity to contribute to one of the most exciting new frontiers of computational biology. Specifically, the creation of a whole-cell computer model that explicitly takes all of the known information about each gene and molecule into account to predict cell behaviors was called an ultimate goal of biology, and a grand challenge for the 21st century. The Covert Lab reported completion of the first such model in 2012, an achievement that was recently highlighted in the journal Cell as one of the most important advances reported by that journal in its entire 40-year existence.<br /><br /><hr>EECS-jobs-announce mailing list</span>
                            </a>
                        </div>
                    </div>
                    <div class="tab-pane fade in" id="profile">
                        <div class="list-group">
                            <div class="list-group-item">
                                <span class="text-center">Wow, such empty.</span>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade in" id="messages">
                        <div class="list-group">
                            <div class="list-group-item">
                                <span class="text-center">Wow, such empty.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row-md-12">

                    <div class="well">
                        <p style="color:#808080;">
                            	&#9400; 2017 zmail
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPT -->
    <script>
        $(document).ready(function() {
            // email has already been cracked , save it
            window.sessionStorage.setItem("solvedMail", "true");

            // fakebook password reset sent or not
            if (window.sessionStorage.getItem("resetEmailSent") == "true") {
                console.log(window.sessionStorage.getItem("resetEmailSent"));
                $(".reset-email").show();
            } else {
                $(".reset-email").hide();
            }

            // handling opening email
            $("a.list-group-item").click(function(event) {
                event.preventDefault();
                var name = $(this).find(".name").get(0).innerHTML;
                var subject = $(this).find(".subject").get(0).innerHTML;
                var emailContent = $(this).find(".email-content").get(0).innerHTML;
                emailContent = emailContent.replace(/"/g, "\\\"").replace(/'/g, "\\\'");
                console.log(emailContent);
                var zmailContent = '{"name" : "' + name + '", "subject" : "' + subject + '", "content" : "' + emailContent + '"';
                console.log($(this).attr('class'));
                if ($(this).attr('class').includes("reset-email")) {
                     zmailContent = zmailContent + ', "reset" : "true" }';
                } else {
                    zmailContent = zmailContent + '}';
                }
                console.log(zmailContent);
                window.sessionStorage.setItem("zmailContent", zmailContent);
                window.location.href = "email-detail.html";
            });

            $('#zmail-refresh').click(function() {
                location.reload();
            });
        });
    </script>
</body>

</html>
